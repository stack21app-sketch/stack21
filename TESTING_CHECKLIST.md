# ‚úÖ Checklist de Testing Completo - Stack21

---

## üìã Tabla de Contenidos

1. [Testing Local](#testing-local)
2. [Testing de APIs](#testing-de-apis)
3. [Testing de UI](#testing-de-ui)
4. [Testing de Flujos Completos](#testing-de-flujos-completos)
5. [Testing de Performance](#testing-de-performance)
6. [Testing de Seguridad](#testing-de-seguridad)
7. [Testing Post-Deploy](#testing-post-deploy)

---

## Testing Local

### Pre-requisitos

```bash
# Verificar que el servidor est√° corriendo
ps aux | grep "next dev" | grep -v grep

# Si no est√° corriendo:
npm run dev
```

### 1. Build y Compilaci√≥n

```bash
# Limpiar cach√©
rm -rf .next

# Build de producci√≥n
npm run build

# Verificar output
# ‚úÖ Debe mostrar: "Compiled successfully"
# ‚úÖ Sin errores de TypeScript
# ‚ö†Ô∏è  Warnings menores son OK
```

**Resultado esperado:**
```
‚úì Compiled successfully
‚úì Linting and checking validity of types
‚úì Collecting page data
‚úì Generating static pages (X/X)
‚úì Collecting build traces
‚úì Finalizing page optimization

Route (app)                              Size     First Load JS
‚îå ‚óã /                                    142 B          87.2 kB
‚îú ‚óã /apps                                142 B          87.2 kB
‚îî ...
```

### 2. Verificar Archivos de Datos

```bash
# Verificar que existen
ls -lh src/data/*.json

# apps.json (debe ser ~2-3MB si tiene 1669 apps)
# categories.json (debe tener 50+ categor√≠as)
# connections.json
# workflows.json
# runs.json
# templates.json
```

**Checklist:**
- [ ] `apps.json` existe y tiene > 100 apps
- [ ] `categories.json` tiene > 10 categor√≠as
- [ ] `connections.json` es un array v√°lido
- [ ] `workflows.json` tiene estructura correcta
- [ ] `runs.json` tiene al menos 1 run de ejemplo
- [ ] `templates.json` tiene 3+ templates

---

## Testing de APIs

### Health Check

```bash
# API de salud
curl http://localhost:3000/api/health
```

**Resultado esperado:**
```json
{"status":"ok"}
```

### Apps API

```bash
# Listar apps (primeras 5)
curl "http://localhost:3000/api/apps?limit=5" | jq

# Buscar apps
curl "http://localhost:3000/api/apps?search=github" | jq

# Filtrar por categor√≠a
curl "http://localhost:3000/api/apps?category=developer-tools" | jq

# Paginaci√≥n
curl "http://localhost:3000/api/apps?page=2&limit=10" | jq

# App espec√≠fica
curl "http://localhost:3000/api/apps/github" | jq
```

**Checklist:**
- [ ] Lista apps sin errores
- [ ] B√∫squeda retorna resultados relevantes
- [ ] Filtro por categor√≠a funciona
- [ ] Paginaci√≥n retorna diferentes resultados
- [ ] App detalle muestra info completa

### Connections API

```bash
# Listar conexiones
curl "http://localhost:3000/api/connections" | jq

# Crear conexi√≥n (OAuth demo)
curl -X POST "http://localhost:3000/api/connections" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test GitHub",
    "appSlug": "github",
    "authType": "oauth2",
    "credentials": {"token": "test123"}
  }' | jq

# Eliminar conexi√≥n
curl -X DELETE "http://localhost:3000/api/connections?id=conn_xxx" | jq
```

**Checklist:**
- [ ] GET retorna array de conexiones
- [ ] POST crea nueva conexi√≥n con ID √∫nico
- [ ] DELETE elimina conexi√≥n correctamente

### Workflows API

```bash
# Listar workflows
curl "http://localhost:3000/api/workflows" | jq

# Crear workflow
curl -X POST "http://localhost:3000/api/workflows" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test Workflow",
    "description": "Workflow de prueba",
    "trigger": {"type": "manual", "config": {}},
    "steps": [
      {"id": "step_1", "type": "log", "name": "Log Test", "config": {"message": "Hola"}}
    ]
  }' | jq

# Obtener workflow
curl "http://localhost:3000/api/workflows/wf_xxx" | jq

# Ejecutar workflow
curl -X POST "http://localhost:3000/api/workflows/wf_xxx/run" \
  -H "Content-Type: application/json" \
  -d '{"triggerData": {"test": true}}' | jq

# Activar/desactivar
curl -X POST "http://localhost:3000/api/workflows/wf_xxx/activate" \
  -H "Content-Type: application/json" \
  -d '{"active": true}' | jq
```

**Checklist:**
- [ ] Lista workflows existentes
- [ ] Crea workflow con ID √∫nico
- [ ] Obtiene workflow espec√≠fico
- [ ] Ejecuta workflow y retorna runId
- [ ] Activa/desactiva estado

### Runs API

```bash
# Listar runs
curl "http://localhost:3000/api/runs" | jq

# Run espec√≠fico
curl "http://localhost:3000/api/runs/run_xxx" | jq
```

**Checklist:**
- [ ] Lista runs con paginaci√≥n
- [ ] Detalle muestra pasos y logs
- [ ] Estados son correctos (running/completed/failed)

### Templates API

```bash
# Listar templates
curl "http://localhost:3000/api/templates" | jq

# Template espec√≠fico
curl "http://localhost:3000/api/templates/template_1" | jq

# Aplicar template
curl -X POST "http://localhost:3000/api/templates/template_1/apply" \
  -H "Content-Type: application/json" \
  -d '{"projectId": "proj_1"}' | jq
```

**Checklist:**
- [ ] Lista templates disponibles
- [ ] Detalle muestra definici√≥n completa
- [ ] Aplicar crea nuevo workflow

### Webhooks API

```bash
# Enviar webhook
curl -X POST "http://localhost:3000/api/webhooks/webhook/test-webhook" \
  -H "Content-Type: application/json" \
  -d '{"event": "test", "data": {"message": "Hola"}}' | jq
```

**Checklist:**
- [ ] Recibe webhook sin errores
- [ ] Ejecuta workflow asociado (si existe)

---

## Testing de UI

### Landing Page (/)

**URL:** http://localhost:3000/

**Checklist:**
- [ ] Carga sin sidebar
- [ ] Hero section visible
- [ ] Botones funcionan
- [ ] Responsive en mobile
- [ ] Sin errores en console
- [ ] Animaciones fluidas

### App Directory (/apps)

**URL:** http://localhost:3000/apps

**Checklist:**
- [ ] Muestra grid de apps
- [ ] Total de resultados correcto
- [ ] B√∫squeda funciona (escribe "github")
- [ ] Filtro por categor√≠a funciona
- [ ] Paginaci√≥n funciona (Next/Prev)
- [ ] Selector num√©rico de p√°gina funciona
- [ ] Click en app lleva a detalle
- [ ] Responsive en mobile

### App Detail (/apps/[slug])

**URL:** http://localhost:3000/apps/github

**Checklist:**
- [ ] Muestra informaci√≥n de la app
- [ ] Logo se visualiza
- [ ] Bot√≥n "Conectar" funciona
- [ ] Secci√≥n de features visible
- [ ] Pricing info mostrada
- [ ] Link "Go to Connections" (si hay conexiones)

### App Connect (/apps/[slug]/connect)

**URL:** http://localhost:3000/apps/github/connect

**Checklist:**
- [ ] Muestra opciones de conexi√≥n
- [ ] Bot√≥n OAuth demo funciona
- [ ] Bot√≥n API Key demo funciona
- [ ] Redirect correcto despu√©s de conectar
- [ ] Mensaje de √©xito visible

### Connections (/connections)

**URL:** http://localhost:3000/connections

**Checklist:**
- [ ] Lista conexiones existentes
- [ ] Paginaci√≥n funciona
- [ ] Bot√≥n "Disconnect" funciona
- [ ] Modal de confirmaci√≥n aparece
- [ ] Contador en header actualiza

### Workflows (/workflows)

**URL:** http://localhost:3000/workflows

**Checklist:**
- [ ] Lista workflows existentes
- [ ] Bot√≥n "New Workflow" funciona
- [ ] Click en workflow abre editor
- [ ] Estados visibles (active/inactive)

### Workflow Creator (/workflows/new)

**URL:** http://localhost:3000/workflows/new

**Checklist:**
- [ ] Formulario de creaci√≥n visible
- [ ] Campos requeridos validados
- [ ] Selecci√≥n de trigger funciona
- [ ] Bot√≥n "Create" redirige a editor

### Workflow Editor (/workflows/[id]/edit)

**URL:** http://localhost:3000/workflows/[id]/edit

**Checklist:**
- [ ] Carga workflow existente
- [ ] Puede agregar pasos
- [ ] Puede editar pasos
- [ ] Puede eliminar pasos
- [ ] Bot√≥n "Save" guarda cambios
- [ ] Bot√≥n "Run" ejecuta workflow
- [ ] Loading states visibles

### Runs (/runs)

**URL:** http://localhost:3000/runs

**Checklist:**
- [ ] Lista ejecuciones
- [ ] Estados visibles (completed/failed)
- [ ] Duraci√≥n mostrada
- [ ] Click en run abre detalle
- [ ] Filtros funcionan

### Run Detail (/runs/[id])

**URL:** http://localhost:3000/runs/[id]

**Checklist:**
- [ ] Muestra informaci√≥n del run
- [ ] Logs paso a paso visibles
- [ ] Input/output de cada paso
- [ ] Estados de pasos correctos
- [ ] Errores mostrados (si hay)

### Templates (/templates)

**URL:** http://localhost:3000/templates

**Checklist:**
- [ ] Grid de templates visible
- [ ] B√∫squeda funciona
- [ ] Filtros por categor√≠a funcionan
- [ ] Filtro por dificultad funciona
- [ ] Bot√≥n "Apply Template" funciona
- [ ] Redirige a editor con workflow

### AI Builder (/ai-builder)

**URL:** http://localhost:3000/ai-builder

**Checklist:**
- [ ] Textarea visible
- [ ] Bot√≥n "Generate" funciona
- [ ] Sugerencias aparecen
- [ ] Puede aplicar sugerencia
- [ ] Ejemplos de prompts visibles

### Dashboard (/dashboard)

**URL:** http://localhost:3000/dashboard

**Checklist:**
- [ ] M√©tricas visibles
- [ ] Gr√°fico de ejecuciones
- [ ] Actividad reciente
- [ ] Acciones r√°pidas funcionan
- [ ] Layout diferente (no AppLayout)

---

## Testing de Flujos Completos

### Flujo 1: Conectar una App

1. [ ] Ir a `/apps`
2. [ ] Buscar "github"
3. [ ] Click en GitHub app
4. [ ] Click "Conectar GitHub"
5. [ ] Elegir "OAuth Demo"
6. [ ] Verificar redirect a `/api/oauth/demo/authorize`
7. [ ] Verificar redirect a `/api/oauth/demo/callback`
8. [ ] Verificar redirect a `/apps/github?status=success`
9. [ ] Verificar mensaje de √©xito
10. [ ] Ir a `/connections`
11. [ ] Verificar que la conexi√≥n aparece

**Tiempo estimado:** 1-2 minutos

### Flujo 2: Crear y Ejecutar Workflow

1. [ ] Ir a `/workflows/new`
2. [ ] Nombre: "Mi Workflow de Prueba"
3. [ ] Trigger: Manual
4. [ ] Click "Create"
5. [ ] En editor, agregar paso "Log"
6. [ ] Configurar mensaje: "Hola Mundo"
7. [ ] Agregar paso "Delay" (1000ms)
8. [ ] Agregar paso "Log" (mensaje: "Adi√≥s")
9. [ ] Click "Save Workflow"
10. [ ] Click "Run Workflow"
11. [ ] Verificar modal de confirmaci√≥n
12. [ ] Confirmar ejecuci√≥n
13. [ ] Ir a `/runs`
14. [ ] Verificar que aparece nuevo run
15. [ ] Click en el run
16. [ ] Verificar logs de cada paso

**Tiempo estimado:** 3-4 minutos

### Flujo 3: Aplicar Template

1. [ ] Ir a `/templates`
2. [ ] Elegir template "Welcome Email"
3. [ ] Click "Apply Template"
4. [ ] Verificar redirect a editor
5. [ ] Verificar que workflow tiene pasos del template
6. [ ] Modificar algo (opcional)
7. [ ] Guardar
8. [ ] Ejecutar
9. [ ] Verificar en `/runs`

**Tiempo estimado:** 2-3 minutos

### Flujo 4: AI Builder

1. [ ] Ir a `/ai-builder`
2. [ ] Escribir: "Enviar email cuando alguien se registra"
3. [ ] Click "Generate"
4. [ ] Esperar respuesta
5. [ ] Verificar sugerencias
6. [ ] Click "Use this workflow"
7. [ ] Verificar redirect a editor
8. [ ] Workflow tiene estructura sugerida

**Tiempo estimado:** 1-2 minutos

### Flujo 5: Desconectar App

1. [ ] Ir a `/connections`
2. [ ] Click "Disconnect" en una conexi√≥n
3. [ ] Confirmar en modal
4. [ ] Verificar que desaparece de la lista
5. [ ] Verificar que contador en header actualiza

**Tiempo estimado:** 30 segundos

---

## Testing de Performance

### Lighthouse Score

```bash
# Instalar Lighthouse CLI
npm install -g lighthouse

# Ejecutar audit
lighthouse http://localhost:3000 \
  --output=html \
  --output-path=./lighthouse-report.html \
  --chrome-flags="--headless"

# Abrir reporte
open lighthouse-report.html
```

**Metas:**
- [ ] Performance: > 70
- [ ] Accessibility: > 90
- [ ] Best Practices: > 85
- [ ] SEO: > 80

### Tiempos de Carga

```bash
# Usar curl con timing
curl -o /dev/null -s -w "Time: %{time_total}s\n" http://localhost:3000/
curl -o /dev/null -s -w "Time: %{time_total}s\n" http://localhost:3000/apps
curl -o /dev/null -s -w "Time: %{time_total}s\n" http://localhost:3000/workflows
```

**Metas:**
- [ ] Landing: < 1s
- [ ] /apps: < 2s
- [ ] /workflows: < 1.5s

### Bundle Size

```bash
# Ver bundle size despu√©s del build
npm run build

# Buscar l√≠nea:
# Route (app)                              Size     First Load JS
```

**Metas:**
- [ ] First Load JS Shared: < 100 kB
- [ ] P√°ginas individuales: < 10 kB

---

## Testing de Seguridad

### HTTPS y Headers

```bash
# En producci√≥n, verificar headers
curl -I https://tu-dominio.vercel.app/

# Debe incluir:
# Strict-Transport-Security
# X-Frame-Options: DENY
# X-Content-Type-Options: nosniff
# X-XSS-Protection
```

**Checklist:**
- [ ] HTTPS forzado
- [ ] Headers de seguridad presentes
- [ ] No expone informaci√≥n sensible

### Secrets

```bash
# Verificar que no hay secrets en el c√≥digo
grep -r "NEXTAUTH_SECRET" src/
grep -r "sk_live_" src/
grep -r "sk_test_" src/

# No debe retornar resultados en archivos commiteados
```

**Checklist:**
- [ ] No hay API keys en c√≥digo
- [ ] .env.local en .gitignore
- [ ] Secrets solo en variables de entorno

### Authentication

**Checklist:**
- [ ] APIs protegidas en producci√≥n
- [ ] Middleware funciona
- [ ] Rate limiting activo (en prod)
- [ ] Sessions expiran correctamente

---

## Testing Post-Deploy

### Producci√≥n (Vercel)

```bash
# Reemplazar con tu URL
DEPLOY_URL="https://tu-dominio.vercel.app"

# Health check
curl "$DEPLOY_URL/api/health"

# Apps API
curl "$DEPLOY_URL/api/apps?limit=5" | jq

# Connections API
curl "$DEPLOY_URL/api/connections" | jq

# Workflows API
curl "$DEPLOY_URL/api/workflows" | jq
```

### Navegador (Producci√≥n)

**Checklist:**
- [ ] Landing carga correctamente
- [ ] SSL activo (candado verde)
- [ ] No hay errores en console
- [ ] /apps muestra aplicaciones
- [ ] OAuth flow funciona (si configurado)
- [ ] Workflows ejecutan
- [ ] Runs se registran

### Monitoring

**Checklist en Vercel Dashboard:**
- [ ] No hay errores 5xx
- [ ] 4xx son esperados (ej: 404)
- [ ] Latencia < 500ms promedio
- [ ] No hay memory leaks
- [ ] Functions no exceden timeout

---

## Reporte de Testing

### Template de Reporte

```markdown
# Reporte de Testing - Stack21

**Fecha:** [Fecha]
**Tester:** [Nombre]
**Entorno:** Local / Staging / Producci√≥n
**URL:** [URL]

## Resumen
- Total de tests: X
- Pasados: Y
- Fallados: Z
- Bloqueadores: W

## Tests Ejecutados

### APIs
- [ ] Health: ‚úÖ PASS
- [ ] Apps: ‚úÖ PASS
- [ ] Connections: ‚ö†Ô∏è PASS con warnings
- [ ] Workflows: ‚ùå FAIL (detalle abajo)

### UI
- [ ] Landing: ‚úÖ PASS
- [ ] App Directory: ‚úÖ PASS
...

## Issues Encontrados

### Issue #1: [T√≠tulo]
- **Severidad:** Alta / Media / Baja
- **Pasos para reproducir:**
  1. ...
  2. ...
- **Comportamiento esperado:** ...
- **Comportamiento actual:** ...
- **Screenshot:** [adjuntar si aplica]

## Recomendaciones

1. ...
2. ...
```

---

## Automatizaci√≥n de Tests

### Setup de Tests E2E (Playwright)

```bash
# Instalar Playwright
npm install -D @playwright/test

# Configurar
npx playwright install

# Crear test b√°sico
cat > tests/e2e/landing.spec.ts << 'EOF'
import { test, expect } from '@playwright/test';

test('landing page loads', async ({ page }) => {
  await page.goto('http://localhost:3000/');
  await expect(page.locator('h1')).toContainText('Stack21');
});
EOF

# Ejecutar tests
npx playwright test
```

### Script de Testing R√°pido

```bash
# Crear script de test r√°pido
cat > test-quick.sh << 'EOF'
#!/bin/bash
echo "üß™ Testing Stack21..."

# Health check
echo "1. Health Check..."
curl -f http://localhost:3000/api/health || echo "‚ùå FAIL"

# Apps API
echo "2. Apps API..."
curl -f "http://localhost:3000/api/apps?limit=1" || echo "‚ùå FAIL"

# Connections API
echo "3. Connections API..."
curl -f "http://localhost:3000/api/connections" || echo "‚ùå FAIL"

echo "‚úÖ Tests completados"
EOF

chmod +x test-quick.sh
./test-quick.sh
```

---

## üéØ Checklist Final

### Pre-Launch
- [ ] Todos los tests locales pasan
- [ ] APIs funcionan correctamente
- [ ] UI responsive en mobile/tablet/desktop
- [ ] Flujos completos funcionan
- [ ] Performance aceptable
- [ ] No hay secrets expuestos

### Launch
- [ ] Deploy a producci√≥n exitoso
- [ ] Tests post-deploy pasan
- [ ] Monitoring configurado
- [ ] Alertas activas

### Post-Launch
- [ ] Monitorear errores primeras 24h
- [ ] Verificar m√©tricas de uso
- [ ] Recopilar feedback
- [ ] Iterar mejoras

---

**¬°Testing completo! Stack21 listo para producci√≥n! üöÄ**

---

**√öltima actualizaci√≥n:** 1 de Octubre, 2025  
**Versi√≥n:** 1.0  
**Mantenedor:** Stack21 Team

